<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gx.springboot_test.mapper.UserMapper">
    <resultMap id="BaseResultMap" type="com.gx.springboot_test.po.User">
        <id column="user_id" jdbcType="INTEGER" property="userId"/>
        <result column="user_name" jdbcType="VARCHAR" property="userName"/>
        <result column="user_sex" jdbcType="TINYINT" property="userSex"/>
        <result column="ID_Card" jdbcType="VARCHAR" property="idCard"/>
        <result column="user_address" jdbcType="VARCHAR" property="userAddress"/>
        <result column="user_phone" jdbcType="VARCHAR" property="userPhone"/>
        <result column="user_image" jdbcType="VARCHAR" property="userImage"/>
        <result column="user_password" jdbcType="VARCHAR" property="userPassword"/>
        <result column="user_group_id" jdbcType="INTEGER" property="userGroupId"/>
        <result column="department_id" jdbcType="INTEGER" property="departmentId"/>
    </resultMap>

    <resultMap id="userVoMap" type="com.gx.springboot_test.vo.SysUserVo">
        <id column="user_id" jdbcType="INTEGER" property="userId"/>
        <result column="user_name" jdbcType="VARCHAR" property="userName"/>
        <result column="user_sex" jdbcType="TINYINT" property="userSex"/>
        <result column="ID_Card" jdbcType="VARCHAR" property="idCard"/>
        <result column="user_address" jdbcType="VARCHAR" property="userAddress"/>
        <result column="user_phone" jdbcType="VARCHAR" property="userPhone"/>
        <result column="user_image" jdbcType="VARCHAR" property="userImage"/>
        <result column="user_password" jdbcType="VARCHAR" property="userPassword"/>
        <result column="user_group_id" jdbcType="INTEGER" property="userGroupId"/>
        <result column="department_id" jdbcType="INTEGER" property="departmentId"/>
        <result column="department_name" jdbcType="VARCHAR" property="departmentName"/>
        <result column="user_group_name" jdbcType="VARCHAR" property="userGroupName"/>
    </resultMap>
    <select id="selectUserList" resultMap="userVoMap">
        SELECT us.user_id,us.user_name,us.user_sex,us.ID_Card,us.user_address,us.user_phone,us.user_image,us.user_password,us.user_group_id,us.department_id,de.department_name,ug.user_group_name
        FROM `user` us
        INNER JOIN department de ON de.department_id=us.department_id
        INNER JOIN user_group ug ON ug.user_group_id=us.user_group_id
    </select>
    <select id="selectById" parameterType="java.lang.Integer" resultMap="userVoMap">
        SELECT us.user_id,us.user_name,us.user_sex,us.ID_Card,us.user_address,us.user_phone,us.user_image,us.user_password,us.user_group_id,us.department_id,de.department_name,ug.user_group_name
        FROM `user` us
                 INNER JOIN department de ON de.department_id=us.department_id
                 INNER JOIN user_group ug ON ug.user_group_id=us.user_group_id
        WHERE us.user_id= #{id,jdbcType=INTEGER}
    </select>
</mapper>
